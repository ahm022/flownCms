<app-page-header [title]="'Add New Block'"></app-page-header>

<div class="form-container">
  <form [formGroup]="blockFormGroup" (ngSubmit)="submitBlock()">
    <div class="form-content">
      <app-custom-input
        labelText="Page Count"
        [isRequired]="true"
        inputType="text"
        [controlName]="'pageCount'"
        [formGroup]="blockFormGroup"
        [type]="'simple-input'"
        [placeholder]="'Enter page count'"
      >
      </app-custom-input>

      <app-custom-select
        [options]="sortingByOptions"
        [formGroup]="blockFormGroup"
        [isRequired]="true"
        [labelText]="'sorting By'"
        [controlName]="'sortingBy'"
      >
      </app-custom-select>

      <app-custom-select
        [options]="sortingOptions"
        [formGroup]="blockFormGroup"
        [isRequired]="true"
        [labelText]="'sorting'"
        [controlName]="'sorting'"
      >
      </app-custom-select>

      <app-custom-select
        [options]="contentSelectionOptions"
        [formGroup]="blockFormGroup"
        [isRequired]="true"
        [labelText]="'Content selection'"
        [controlName]="'contentSelection'"
        (changeEvent)="checkByCategory()"
      >
      </app-custom-select>
    </div>

    <app-btn
    *ngIf="checkByCategory()"
      [btnText]="'Add page category'"
      (clickEvent)="openAddCategoryDialog()"
    ></app-btn>

    <app-selected-label
      *ngIf="selectedCategories && checkByCategory()"
      [list]="selectedCategories"
    ></app-selected-label>

    <div>
      <app-btn
        [disabled]="
          !blockFormGroup.valid || (checkByCategory() && selectedCategories.length <= 0)
        "
        [btnText]="'Get Pages'"
        (clickEvent)="getPages()"
      ></app-btn>
    </div>
    <div *ngIf="pages" class="box">
      <div class="multiple-value-item" *ngFor="let item of pages">
        
        <input
          (change)="addValue($event, item.postTitle,item.id)"
          type="checkbox"
          [value]="item.id"
        />
        <label>{{ item.postTitle }}</label>
      </div>
    </div>
    <div *ngIf="pages">
      <app-btn
        [disabled]="(!blockFormGroup.valid &&  (selectedItems.length < pageCount)) || (checkByCategory() && selectedCategories.length <= 0) "
        [btnText]="'Create Block'"
        (clickEvent)="createBlock()"
      ></app-btn>
    </div>
    <div class="alerttext">
      {{ alertText }}
    </div>
   


  </form>
</div>
